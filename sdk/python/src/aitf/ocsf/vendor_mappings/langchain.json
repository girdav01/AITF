{
  "$schema": "https://aitf.dev/schemas/vendor-mapping-v1.json",
  "vendor": "langchain",
  "version": "0.3",
  "description": "Maps LangChain / LangSmith telemetry attributes to AITF semantic conventions and OCSF event classes.",
  "homepage": "https://docs.smith.langchain.com/observability",

  "span_name_patterns": {
    "inference": [
      "^ChatOpenAI$",
      "^ChatAnthropic$",
      "^ChatGoogleGenerativeAI$",
      "^ChatMistralAI$",
      "^ChatCohere$",
      "^ChatOllama$",
      "^ChatVertexAI$",
      "^ChatBedrock$",
      "^OpenAIEmbeddings$",
      "^HuggingFaceEmbeddings$"
    ],
    "agent": [
      "^AgentExecutor$",
      "^LangGraph$",
      "^CrewAI",
      "^RunnableSequence$"
    ],
    "tool": [
      "^Tool:",
      "^ToolCall:",
      "^StructuredTool:"
    ],
    "retrieval": [
      "^Retriever:",
      "^VectorStoreRetriever$",
      "^ContextualCompressionRetriever$",
      "^MultiQueryRetriever$",
      "^SelfQueryRetriever$",
      "^ParentDocumentRetriever$"
    ],
    "chain": [
      "^RunnableSequence$",
      "^SequentialChain$",
      "^LLMChain$",
      "^RetrievalQA$",
      "^ConversationalRetrievalChain$"
    ]
  },

  "attribute_mappings": {
    "inference": {
      "vendor_to_aitf": {
        "ls_provider": "gen_ai.system",
        "ls_model_name": "gen_ai.request.model",
        "ls_model_type": "gen_ai.operation.name",
        "ls_temperature": "gen_ai.request.temperature",
        "ls_max_tokens": "gen_ai.request.max_tokens",
        "ls_stop_sequences": "gen_ai.request.stop_sequences",

        "openai.model": "gen_ai.request.model",
        "openai.api_base": "gen_ai.server.address",
        "openai.api_type": "gen_ai.system",

        "llm.input_messages": "gen_ai.prompt",
        "llm.output_messages": "gen_ai.completion",
        "llm.token_count.prompt": "gen_ai.usage.input_tokens",
        "llm.token_count.completion": "gen_ai.usage.output_tokens",
        "llm.token_count.total": "gen_ai.usage.total_tokens",
        "llm.invocation_parameters": "gen_ai.request.parameters",

        "langchain.run.response_id": "gen_ai.response.id",
        "langchain.run.finish_reason": "gen_ai.response.finish_reasons"
      },
      "ocsf_class_uid": 7001,
      "ocsf_activity_id_map": {
        "chat": 1,
        "text_completion": 2,
        "embeddings": 3,
        "default": 99
      },
      "defaults": {
        "gen_ai.operation.name": "chat"
      }
    },

    "agent": {
      "vendor_to_aitf": {
        "langchain.agent.name": "aitf.agent.name",
        "langchain.agent.type": "aitf.agent.type",
        "langchain.run.session_id": "aitf.agent.session_id",
        "langchain.run.id": "aitf.agent.id",
        "langchain.run.parent_id": "aitf.agent.parent_id",
        "langchain.run.name": "aitf.agent.name",
        "langchain.run.tags": "aitf.agent.tags",

        "langgraph.node": "aitf.agent.step_type",
        "langgraph.step": "aitf.agent.step_index",
        "langgraph.thread_id": "aitf.agent.session_id",
        "langgraph.checkpoint_ns": "aitf.agent.checkpoint",
        "langgraph.triggers": "aitf.agent.step_action"
      },
      "ocsf_class_uid": 7002,
      "ocsf_activity_id_map": {
        "session_start": 1,
        "session_end": 2,
        "step_execute": 3,
        "delegation": 4,
        "memory_access": 5,
        "default": 99
      },
      "defaults": {
        "aitf.agent.framework": "langchain",
        "aitf.agent.type": "autonomous"
      }
    },

    "tool": {
      "vendor_to_aitf": {
        "langchain.tool.name": "aitf.mcp.tool.name",
        "langchain.tool.description": "aitf.mcp.tool.description",
        "langchain.tool.input": "aitf.mcp.tool.input",
        "langchain.tool.output": "aitf.mcp.tool.output",
        "langchain.tool.error": "aitf.mcp.tool.is_error",

        "tool.name": "aitf.mcp.tool.name",
        "tool.id": "aitf.mcp.tool.call_id",
        "tool.input": "aitf.mcp.tool.input",
        "tool.output": "aitf.mcp.tool.output"
      },
      "ocsf_class_uid": 7003,
      "ocsf_activity_id_map": {
        "function_call": 1,
        "mcp_tool": 2,
        "skill": 3,
        "default": 1
      },
      "defaults": {
        "tool_type": "function"
      }
    },

    "retrieval": {
      "vendor_to_aitf": {
        "langchain.retriever.name": "aitf.rag.pipeline.name",
        "langchain.retriever.type": "aitf.rag.retrieve.database",
        "langchain.retriever.k": "aitf.rag.retrieve.top_k",
        "langchain.retriever.query": "aitf.rag.query",
        "langchain.retriever.documents": "aitf.rag.retrieve.results_count",
        "langchain.retriever.score_threshold": "aitf.rag.retrieve.min_score",

        "retriever.query": "aitf.rag.query",
        "retriever.documents.count": "aitf.rag.retrieve.results_count",
        "retriever.embeddings.model": "aitf.rag.query.embedding_model"
      },
      "ocsf_class_uid": 7004,
      "ocsf_activity_id_map": {
        "vector_search": 1,
        "document_retrieval": 2,
        "hybrid_search": 3,
        "reranking": 5,
        "default": 1
      },
      "defaults": {
        "aitf.rag.pipeline.stage": "retrieve"
      }
    }
  },

  "provider_detection": {
    "attribute_keys": ["ls_provider", "openai.api_type", "gen_ai.system"],
    "model_prefix_to_provider": {
      "gpt-": "openai",
      "o1": "openai",
      "o3": "openai",
      "claude-": "anthropic",
      "gemini-": "google",
      "mistral-": "mistral",
      "command-": "cohere",
      "llama-": "meta"
    }
  },

  "severity_mapping": {
    "langchain.run.error": {
      "true": 4,
      "false": 1
    }
  },

  "metadata": {
    "ocsf_product": {
      "name": "LangChain",
      "vendor_name": "LangChain Inc.",
      "version": "0.3"
    }
  }
}
